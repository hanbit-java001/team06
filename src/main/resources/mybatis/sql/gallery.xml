<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="gallery">

	<insert id="insertHashtag" parameterType="string">
		INSERT INTO HASHTAG
			(HASHTAG_WORD )
		VALUES
			(#{hashTag} )
	</insert>

	<select id="selectHashtag" parameterType="string" resultType="string">
		SELECT HASHTAG_WORD
		  FROM HASHTAG
		  WHERE hashTag_id = #{hashTag}
	</select>

	<insert id="insertPhoto_2" parameterType="GalleryVO">
		INSERT INTO PHOTO
			(photo_id, photo_name, photo_date, photo_res1, photo_res2,
			 photo_path, member_id, hachTag_Id1, hachTag_Id2, hachTag_Id3,
			 file_Size, content_Type )
		VALUES
			(#{photoId}, #{photoName}, #{photoDate}, #{photoRes1}, #{photoRes2},
			#{photoPath}, #{memberId}, #{hachTagId1}, #{hachTagId2}, #{hachTagId3},
			#{contentType},#{fileSize} )
	</insert>

	<insert id="insertPhoto3" parameterType="GalleryVO">
	INSERT INTO PHOTO
			(photo_id, photo_name, photo_date, photo_res1, photo_res2,
			 photo_path, member_id )
  		VALUES
			(SEQ_PHOTO.NEXTVAL, #{photoName}, TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS'),
			#{photoPath} )
	</insert>

	<insert id="insertPhoto" parameterType="GalleryVO">
	INSERT INTO PHOTO
			(photo_id, photo_name, photo_date, photo_path, file_Size, content_Type,
			 thumb, photo_res1, photo_res2)
  		VALUES
			(SEQ_PHOTO.currVAL, #{photoName}, TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS'),
			 #{photoPath}, #{fileSize}, #{contentType}, #{thumb}, #{photoRes1}, #{photoRes2} )
	</insert>

	<update id="updatePhoto" parameterType="GalleryVO">
		UPDATE PHOTO
		   SET	photo_name = #{photoName},
				photo_date = #{photoDate},
				photo_res1 = #{photoRes1},
				photo_res2 = #{photoRes2},
				photo_path = #{photoPath}
   		WHERE PhotoId = #{photoId}
	</update>

	<select id="selectPhotoName" parameterType="int" resultType="string">
		SELECT photo_name
		  FROM PHOTO
		  WHERE photo_id = #{photoId}
	</select>

	<select id="selectPhotoId" parameterType="string" resultType="int">
		SELECT photo_id
		  FROM PHOTO
		 WHERE photo_name = #{photoName}
	</select>

	<select id="selectNextPhotoId" resultType="int">
		SELECT SEQ_PHOTO.NEXTVAL
		  FROM DUAL
	</select>

	<select id="countPhotoList" resultType="int">
		SELECT COUNT(photo_id)
		  FROM PHOTO
	</select>

	<select id="selectPhoto" parameterType="string" resultType="GalleryVO">
		SELECT photo_id,
				photo_name,
				photo_date,
				photo_path,
				content_type,
				file_size,
				thumb
			FROM PHOTO
			WHERE PHOTO_NAME = #{photoName}
	</select>

	<select id="selectFile" parameterType="map" resultType="GalleryVO">
		SELECT photo_id AS PhotoId,
			   photo_name AS PhotoName,
			   photo_date AS UploadDate,
			   photo_res1 AS Resolution1,
			   photo_res2 AS Resolution2,
			   photo_path AS PhotoPath,
			   member_id  AS MemberID,
			   thumb
		  FROM PHOTO
		  WHERE PhotoName = #{photoName}
	</select>

	<select id="selectPhotoList" resultType="GalleryVO">
		SELECT photo_id AS PhotoId,
			   photo_name AS PhotoName,
			   photo_date AS UploadDate,
			   photo_res1 AS Resolution1,
			   photo_res2 AS Resolution2,
			   photo_path AS PhotoPath,
			   member_id  AS MemberID,
			   thumb
		  FROM PHOTO
		  order by PHOTO_ID desc
	</select>

</mapper>